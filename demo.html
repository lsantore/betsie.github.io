<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Betsie: Dual User Guided Linear Prototype</title>
    
    <meta name="robots" content="noindex, nofollow">

    <style>
        /* --- IMAGE PATHS UPDATED TO /images DIRECTORY --- */
        /* These paths assume you have the following files in your /images directory:
           friend-01.jpg, friend-02.jpg, friend-03.jpg, friend-04.jpg 
        */
        
        /* friend-01.jpg (Sarah K. - Red scheme) */
        .avatar-sarah, .h2h-player.user-a .h2h-avatar, .frame-red .profile-picture, 
        .challenger-picture {
            background-image: url("/images/friend-01.jpg");
        }

        /* friend-02.jpg (Jessica M. - Blue scheme) */
        .avatar-jessica, .h2h-player.user-b .h2h-avatar, .frame-blue .profile-picture {
            background-image: url("/images/friend-02.jpg");
        }

        /* friend-03.jpg (Emily R. - Green scheme) */
        .avatar-emily {
            background-image: url("/images/friend-03.jpg");
        }

        /* friend-04.jpg (Michael B. - Gray scheme) */
        .avatar-michael {
            background-image: url("/images/friend-04.jpg");
        }

        /* --- END IMAGE PATH UPDATES --- */

        /* BASE STYLES & LAYOUT */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column; 
            justify-content: flex-start;
            align-items: center;
            min-height: 10vh;
            margin: 0;
            user-select: none;
            padding-top: 15px; 
        }

        /* --- Small Screen Blocker Logic (Crucial for dual view) --- */
        .content-wrapper {
            display: block; 
        }
        
        .too-small-message {
            display: none; 
            padding: 40px;
            text-align: center;
            font-size: 18px;
            color: #dc3545;
            background-color: #ffebeb;
            border: 2px solid #dc3545;
            border-radius: 10px;
            max-width: 600px;
            margin: 50px auto;
        }

        @media (max-width: 1050px) {
            .content-wrapper {
                display: none; 
            }
            .too-small-message {
                display: block; 
            }
        }
        /* --- End Small Screen Blocker Logic --- */


        .dual-frame-container {
            display: flex;
            gap: 30px; 
            margin-bottom: 20px;
        }

        .mobile-frame {
            width: 375px; 
            height: 667px; 
            border: 8px solid #333;
            border-radius: 40px;
            background-color: #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }
        
        .frame-red {
            border-color: #dc3545; 
        }
        
        .frame-blue {
            border-color: #007aff; 
        }

        .user-label {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 700;
            font-size: 16px;
            padding: 2px 10px;
            border-radius: 5px;
            color: white;
            z-index: 100;
        }
        .frame-red .user-label { background-color: #dc3545; }
        .frame-blue .user-label { background-color: #007aff; }


        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: none;
            flex-direction: column;
        }

        .screen.active {
            display: flex;
        }

        /* COMPONENT STYLES */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            font-size: 14px;
            font-weight: 500;
            border-bottom: 1px solid #eee;
            color: #888;
        }
        .progress-indicator { color: #333; font-weight: 700; }
        .content { 
            flex-grow: 1; 
            padding: 20px; 
            overflow-y: auto;
            padding-bottom: 80px; 
        }
        .screen-footer { 
            position: absolute; 
            bottom: 0; 
            left: 0;
            width: 100%;
            padding: 15px 20px; 
            border-top: 1px solid #eee; 
            background-color: #fff;
            z-index: 40; 
            box-sizing: border-box; 
        }
        .cta-primary { width: 100%; padding: 15px; background-color: #007aff; color: white; font-size: 16px; font-weight: 700; border: none; border-radius: 10px; cursor: pointer; text-transform: uppercase; }
        .cta-secondary { background-color: #eee; color: #333; border: 1px solid #ccc; margin-top: 10px; }
        .bet-card { border: 1px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; background-color: #f9f9f9; }
        
        /* Form Element Mocks */
        .input-field.large-text { 
            height: 100px; 
            resize: none; 
            width: 100%; 
            box-sizing: border-box; 
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        
        .input-mock-date {
            width: 100%; 
            padding: 15px; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            font-weight: 600; 
            color: #007aff;
            box-sizing: border-box; 
        }

        .input-field.friend-search-input {
            width: 100%; 
            padding: 15px; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            font-size: 16px;
            box-sizing: border-box; 
        }

        /* Friend List Item styles for Step 4 */
        .friend-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        /* Navigation */
        .nav-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: #fff;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            z-index: 50; 
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 10px;
            color: #888;
            font-weight: 600;
            cursor: pointer;
            width: 20%;
        }
        .nav-create { 
             margin-top: -15px; 
             background-color: #007aff;
             color: white;
             font-size: 24px;
             font-weight: 300;
             height: 50px;
             width: 50px;
             border-radius: 50%;
             line-height: 40px;
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
             display: flex;
             justify-content: center;
             align-items: center;
        }
        .nav-item.active { color: #007aff; }

        /* Lock Screen Specific Styles */
        #screen-0-lock-plain, #screen-0-lock-notified {
            background: #000; 
            color: white;
            text-align: center;
            justify-content: center;
            align-items: center;
        }
        #screen-0-lock-plain h1, #screen-0-lock-notified h1 {
            color: white;
            font-size: 48px;
            margin-bottom: 10px;
        }
        .notification-mock-content {
            background: rgba(255,255,255,0.1); 
            padding: 10px; 
            border-radius: 10px; 
            margin-top: 20px; 
            text-align: left;
            color: white;
        }

        /* Inbox/Notification List Item */
        .inbox-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        /* Inbox Image */
        .inbox-item-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #f7a01d; 
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: white;
            font-weight: 700;
            margin-right: 15px;
        }
        
        .inbox-item-text {
            flex-grow: 1;
        }
        .inbox-item-title {
            font-size: 16px;
            display: block;
            color: #555;
        }
        .inbox-item-title.unread { 
            font-weight: bold; 
            color: #333; 
        }
        .inbox-item-meta {
            font-size: 12px;
            color: #999;
            display: block;
            margin-top: 3px;
        }
        
        /* PROFILE/AVATAR STYLES (Image Replacement) */
        .avatar-placeholder, .profile-picture, .challenger-picture, .h2h-avatar, .winner-avatar, .loser-avatar {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #ddd; 
            display: flex;
            justify-content: center;
            align-items: center;
            color: transparent; 
            font-size: 0;
            text-indent: -9999px; 
        }
        /* Style for the 'No Contest' placeholder */
        .avatar-placeholder.nc-outcome {
            background-color: #ccc;
            color: #555;
            font-size: 14px;
            font-weight: 700;
            text-indent: 0;
            line-height: 1;
        }


        .avatar-placeholder {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .profile-picture {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 20px auto 10px auto;
            border: 3px solid; 
        }
        .frame-red .profile-picture { border-color: #dc3545; }
        .frame-blue .profile-picture { border-color: #007aff; }

        .challenger-picture {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            margin: 0 auto 15px auto; 
            border: 3px solid #dc3545; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        /* New Styles for Match Results Screen (Step 12) */
        .match-results-summary {
            text-align: center;
            padding: 10px 0;
            margin-bottom: 10px; /* Reduced margin */
        }
        /* Conditional Win/Loss Banner H1 */
        .match-results-summary h1 {
            font-size: 32px;
            margin-bottom: 15px;
            line-height: 1.1; /* Tighter line height for the two-line break */
        }
        .match-results-summary h1.win-banner {
            color: #28a745;
        }
        .match-results-summary h1.loss-banner {
            color: #dc3545;
        }
        
        .winning-prediction-box {
            background-color: #e8f5e9;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .winning-prediction-box h4 {
            color: #28a745;
            margin: 0 0 5px 0;
            font-size: 14px;
            font-weight: 700;
        }
        .winning-prediction-box p {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        .winner-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        .winner-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid #28a745;
            margin-bottom: 10px;
        }
        .winner-panel h3 {
            margin: 0;
            font-size: 20px;
            color: #333;
        }
        .winner-panel p {
            margin: 5px 0 0 0;
            font-size: 14px;
            color: #28a745;
            font-weight: 600;
        }

        .loser-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        .loser-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid #dc3545;
        }
        .loser-info {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #dc3545;
        }
        
        /* Updated Head to Head Scorecard */
        .h2h-scorecard {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            margin-bottom: 20px; /* Added margin here */
            background-color: #f7f7f7;
            text-align: center;
        }
        .h2h-scorecard h4 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #555;
        }
        .h2h-score-display {
            font-size: 36px;
            font-weight: 700;
            color: #333;
            line-height: 1;
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center;
        }
        .h2h-score-a { color: #dc3545; }
        .h2h-score-b { color: #007aff; }

        /* General Score Card */
        .score-card { 
            border: 2px solid #ddd; 
            border-radius: 12px; 
            padding: 25px 15px;
            margin-top: 25px;
            background-color: #fefefe;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        .score-row { 
            display: flex; 
            justify-content: space-between; 
            font-size: 18px; 
            font-weight: 600;
            padding: 8px 0;
        }
        .win { color: #28a745; }
        .loss { color: #dc3545; }

        /* Trending Bet Pick Styling */
        .trending-picks-container {
            display: flex;
            justify-content: center;
            font-size: 14px;
            margin-top: 5px;
        }
        .trending-picks-container > span {
            padding: 0 8px;
            color: #555;
            font-weight: 600;
        }

        /* Countdown Timer Styles */
        .countdown-timer-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 10px;
            border: 2px solid #007aff;
            border-radius: 10px;
            background-color: #e6f7ff;
        }
        .countdown-item {
            text-align: center;
        }
        .countdown-number {
            font-size: 24px;
            font-weight: 700;
            color: #007aff;
            line-height: 1;
        }
        .countdown-label {
            font-size: 10px;
            font-weight: 600;
            color: #555;
            text-transform: uppercase;
            margin-top: 5px;
        }

        /* PENDING PLAYERS LIST (for Step 6) & LIVE PLAYER LIST (for Step 9) */
        .pending-players-container {
            margin-top: 0; 
            padding-top: 0;
            text-align: left;
        }
        .pending-players-container h4 {
            margin-bottom: 10px; 
        }

        .player-bet-line {
            display: flex;
            align-items: flex-start; 
            margin-bottom: 12px;
        }
        #initial-prediction-line { /* Specific styles for Sarah K's initial bet line */
            margin-top: 15px; 
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
        }
        .pending-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #ffc107; 
            margin-right: 8px;
            flex-shrink: 0;
            box-shadow: 0 0 5px rgba(255, 193, 7, 0.5);
        }
        .player-info {
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }
        
        /* CHAT BUBBLE STYLES (New for Step 9) */
        .chat-bubble {
            flex-grow: 1;
            padding: 8px 12px;
            border-radius: 18px;
            font-size: 14px;
            font-weight: 600;
            word-wrap: break-word;
            max-width: 75%;
            margin-left: 10px; 
            line-height: 1.4;
            position: relative;
        }

        /* Sarah K. (User A) - Initiator/YES (Green Scheme) - For LIVE State */
        #frame-a .chat-bubble.sarah-bet {
            background-color: #e8f5e9; /* Light Green */
            color: #28a745; /* Dark Green Text */
            border-bottom-left-radius: 4px; /* Tail corner */
            text-align: left; /* Ensure live bet is left justified */
        }
        
        /* User A PENDING SCREEN (STEP 7) styling for initial prediction */
        #frame-a #initial-prediction-line .chat-bubble {
            background-color: #fff; /* White Background */
            color: #333; /* Dark Gray/Black Text */
            font-weight: 500; /* Normal weight for regular text */
            text-align: left; /* Left justified */
            border: 1px solid #ddd; /* Subtle border to define the bubble */
            border-bottom-left-radius: 18px; /* Remove tail corner for this specific styling */
        }
        
        /* Jessica M. (User B) - Alternate Prediction (Blue Scheme) */
        .chat-bubble.jessica-bet {
            background-color: #e6f7ff; /* Light Blue */
            color: #007aff; /* Dark Blue Text */
            border-bottom-left-radius: 4px; /* Tail corner */
        }

        /* Emily R. (Pending) */
        .chat-bubble.pending-bet {
            background-color: #ddd; 
            color: #555; 
            font-weight: 500;
            border-bottom-left-radius: 4px; /* Tail corner */
        }

        /* CHALLENGE RESPONSE SCREEN (STEP 7) STYLES */
        #screen-9-challenge-response h1 {
            margin-bottom: 10px; /* Reduced margin below H1 */
        }
        #screen-9-challenge-response h2 {
            margin-top: 15px; /* Reduced margin above the H2 label */
            margin-bottom: 5px; 
        }
        /* Reduce margin above "Sarah K. Predicts:" on User B's screen */
        #screen-9-challenge-response .bet-card p:first-child { 
            margin-top: 5px !important; 
            margin-bottom: 5px;
        }

        /* RESOLUTION POLL STYLES (New for Step 11) */
        .resolution-poll-container {
            margin-top: 20px;
            padding: 10px 0;
        }

        .prediction-vote-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin-bottom: 15px;
            background-color: #fff;
            position: relative;
        }

        .prediction-text-container {
            flex-grow: 1;
            margin-left: 10px;
        }

        .prediction-text-container h4 {
            margin: 0 0 3px 0;
            font-size: 14px;
            color: #007aff;
            font-weight: 700;
        }
        /* Style specifically for the new 'No Contest' option */
        .prediction-text-container h4.system-outcome {
            color: #555; /* Neutral color for System outcome */
        }

        .prediction-text-container p {
            margin: 0;
            font-size: 16px;
            line-height: 1.3;
            font-weight: 500;
            color: #333;
        }

        .vote-radio-wrapper {
            flex-shrink: 0;
            width: 30px; /* Space for radio button */
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .vote-radio-wrapper input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            border-color: #007aff;
        }
        
        .vote-prompt {
            text-align: center;
            margin-top: 0; /* REMOVED MARGIN TOP */
            margin-bottom: 10px;
            font-size: 16px;
            font-weight: 700;
            color: #dc3545; /* Highlight the action required */
            line-height: 1.4; /* Ensure the line break works well */
        }
        
        /* New Resolution Info Box (Replacing Bet Card) */
        .resolution-info-box {
            text-align: center;
            padding: 10px 0;
            margin: 10px 0 0 0; /* Reduced bottom margin */
            font-size: 16px;
            font-weight: 600;
            color: #555;
            border-bottom: 1px solid #ddd;
            border-top: 1px solid #ddd;
        }
        
        /* Specific style for the date within the info box */
        .resolution-info-box .resolution-date {
            display: block;
            font-size: 14px;
            font-weight: normal;
            color: #999;
            margin-top: 5px;
        }


        /* GUIDED JOURNEY STYLES */
        .journey-container {
            width: 800px;
            padding: 20px;
            background-color: #fff;
            border-left: 3px solid #007aff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 20px; 
        }
        .journey-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .journey-controls button {
            padding: 10px 15px;
            border: 1px solid #007aff;
            background-color: #007aff;
            color: white;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            min-width: 120px;
        }
        
        /* COPYRIGHT STYLES */
        .copyright {
            margin-top: 15px;
            font-size: 12px;
            color: #888;
        }
        .copyright a {
            color: inherit;
            text-decoration: none;
        }
    </style>
    <script>
        // --- CONFIG ---
        let currentStepIndex = 0; // Reset to Step 1 (Index 0)
        let countdownInterval;
        const resolutionDate = new Date("Dec 20, 2025 00:00:00").getTime(); // Fixed resolution time
        
        // Static Bet Predictions for Resolution Poll
        const activePredictions = [
            {
                id: 'sarah-k-pred',
                user: 'Sarah K.',
                avatarClass: 'avatar-sarah',
                prediction: 'Olivia and James will confirm they are dating before the next awards show.',
                userColor: '#dc3545' 
            },
            {
                id: 'jessica-m-pred',
                user: 'Jessica M.',
                avatarClass: 'avatar-jessica',
                prediction: 'Olivia will announce she\'s actually with Trevor.',
                userColor: '#007aff'
            },
            {
                id: 'no-contest-pred',
                user: 'System', // Use a special user ID for the neutral option
                avatarClass: 'nc-outcome', // Custom class for NC
                prediction: 'Neither were right. Ruled as No Contest.',
                userColor: '#333'
            }
        ];

        // Defines the linear path: [User A ScreenID, User B ScreenID, Description]
        const linearJourney = [
            // Step: 0 (STEP 1)
            ['screen-1-signup', 'screen-0-lock-plain', 'Step 1: New User Onboarding (Sarah K. - Red Frame). The primary user is logging in.'],
            // Step: 1 (STEP 2)
            ['screen-2-home-feed', 'screen-0-lock-plain', 'Step 2: Home Feed/No Active Bets (Sarah K.). Sarah clicks \'+\' to create a new bet.'],
            // Step: 2 (STEP 3)
            ['screen-5-define', 'screen-0-lock-plain', 'Step 3: Create Bet (1/3 Define - Sarah K.). Sarah enters the prediction statement and resolution date.'],
            // Step: 3 (STEP 4)
            ['screen-8-invite', 'screen-0-lock-plain', 'Step 4: Create Bet (2/3 Invite - Sarah K.). Sarah selects Jessica M. and reviews other friends/invites.'],
            // Step: 4 (STEP 5)
            ['screen-8a-review', 'screen-0-lock-plain', 'Step 5: Create Bet (3/3 Review - Sarah K.). Sarah confirms the bet details and invited players.'],
            // Step: 5 (STEP 6)
            ['screen-5-active-bet-pending', 'screen-0-lock-notified', 'Step 6: Bet Sent & Notification Received. Sarah\'s bet is pending. User B\'s Lock Screen updates to show the new challenge push notification.'],
            // Step: 6 (STEP 7)
            ['screen-5-active-bet-pending', 'screen-9-challenge-response', 'Step 7: Friend Joins (Jessica M.). Jessica clicks the notification and lands on the Bet Landing Page to agree or propose an alternative prediction.'],
            // Step: 7 (STEP 8)
            ['screen-5-active-bet-pending', 'screen-1-signup', 'Step 8: Account Creation (Jessica M.). Jessica makes her choice and is shown the full Sign Up/Login page before proceeding to the live bet.'], 
            // Step: 8 (STEP 9)
            ['screen-5-active-bet-live', 'screen-5-active-bet-live', 'Step 9: Bet Live (Both Users). Jessica signs up/logs in successfully. Both users now see the active bet in their My Bets section, featuring the countdown timer and structured player predictions (Chat Bubbles).'],
            // Step: 9 (STEP 10)
            ['screen-4-notifications', 'screen-4-notifications', 'Step 10: Inbox/Messages. Both users see the combined feed with the newest action (Resolution Reminder) at the top, unread.'],
            // Step: 10 (STEP 11)
            ['screen-7-resolution', 'screen-7-resolution', 'Step 11: Resolve Bet (Both Users). Both users land on the Resolution screen and must vote for which prediction was correct.'],
            // Step: 11 (STEP 12)
            ['screen-12-h2h-match-results', 'screen-12-h2h-match-results', 'Step 12: Match Summary (Combined). Both users land on a combined result screen which shows the Win/Loss status, winning prediction, and updated H2H score.'], 
            // Step: 12 (STEP 13)
            ['screen-11-profile-score', 'screen-11-profile-score', 'Step 13: Profile Scores (Final Step). Both users view their updated Profile pages with their current Win/Loss record (A: 1W-0L, B: 0W-1L).']
        ];


        // --- COUNTDOWN LOGIC ---

        // Mock current time for demonstration (Dec 15, 2025 17:00:00 PM PST)
        const mockNow = new Date("Dec 15, 2025 17:00:00").getTime(); 

        function startCountdown() {
            if (countdownInterval) clearInterval(countdownInterval);

            let currentTime = mockNow;

            function updateTimer() {
                const distance = resolutionDate - currentTime;
                
                if (distance < 0) {
                    clearInterval(countdownInterval);
                    const closedText = '<span style="color: #dc3545;">CLOSED</span>';
                    document.getElementById('countdown-timer-a').innerHTML = closedText;
                    document.getElementById('countdown-timer-b').innerHTML = closedText;
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const daysFormatted = `<div class="countdown-number">${days}</div><div class="countdown-label">Days</div>`;
                const hoursFormatted = `<div class="countdown-number">${hours < 10 ? '0' + hours : hours}</div><div class="countdown-label">Hours</div>`;
                const minutesFormatted = `<div class="countdown-number">${minutes < 10 ? '0' + minutes : minutes}</div><div class="countdown-label">Mins</div>`;
                const secondsFormatted = `<div class="countdown-number">${seconds < 10 ? '0' + seconds : seconds}</div><div class="countdown-label">Secs</div>`;

                const timerContainerA = document.getElementById('countdown-timer-a');
                const timerContainerB = document.getElementById('countdown-timer-b');

                if (timerContainerA) {
                    timerContainerA.innerHTML = 
                        `<div class="countdown-item">${daysFormatted}</div>` +
                        `<div class="countdown-item">${hoursFormatted}</div>` +
                        `<div class="countdown-item">${minutesFormatted}</div>` +
                        `<div class="countdown-item">${secondsFormatted}</div>`;
                }
                if (timerContainerB) {
                    timerContainerB.innerHTML = 
                        `<div class="countdown-item">${daysFormatted}</div>` +
                        `<div class="countdown-item">${hoursFormatted}</div>` +
                        `<div class="countdown-item">${minutesFormatted}</div>` +
                        `<div class="countdown-item">${secondsFormatted}</div>`;
                }

                currentTime += 1000;
            }

            updateTimer(); 
            countdownInterval = setInterval(updateTimer, 1000);
        }

        function stopCountdown() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
        }

        // --- RESOLUTION POLL RENDERING ---
        function renderResolutionPoll(frameId) {
            const pollContainer = document.querySelector(`#${frameId} .resolution-poll-container`);
            if (!pollContainer) return;
            
            // Removed HR tag above vote-prompt as requested in prior step
            let html = '<p class="vote-prompt">Which prediction came true?<br>Cast your vote:</p>';
            
            activePredictions.forEach((pred, index) => {
                const isUserA = frameId === 'frame-a';
                
                let userName = pred.user;
                let userPredictionLabel = `${pred.user}'s Prediction:`;
                let avatarHtml = `<div class="avatar-placeholder ${pred.avatarClass}" style="margin-right: 0;"></div>`;
                let headerClass = '';

                if (pred.user === 'System') {
                    userName = 'Alternate Outcome';
                    userPredictionLabel = 'Alternate Outcome:';
                    avatarHtml = `<div class="avatar-placeholder ${pred.avatarClass}" style="margin-right: 0;">NC</div>`; // Now displays NC
                    headerClass = 'system-outcome';
                } else if (isUserA && pred.user === 'Sarah K.') {
                    userName = 'You';
                    userPredictionLabel = 'Your Prediction:';
                } else if (!isUserA && pred.user === 'Jessica M.') {
                    userName = 'You';
                    userPredictionLabel = 'Your Prediction:';
                }
                

                html += `
                    <div class="prediction-vote-item">
                        ${avatarHtml}
                        
                        <div class="prediction-text-container">
                            <h4 class="${headerClass}" style="color: ${pred.userColor};">${userPredictionLabel}</h4>
                            <p>${pred.prediction.replace('. Ruled as No Contest.', '.<br>Ruled as No Contest.')}</p>
                        </div>
                        
                        <div class="vote-radio-wrapper">
                            <input type="radio" id="vote-${pred.id}" name="resolution-vote" value="${pred.id}">
                        </div>
                    </div>
                `;
            });

            pollContainer.innerHTML = html;
        }


        // --- UI & NAVIGATION FUNCTIONS ---
        

        function goToScreenForUser(user, screenId) {
            const frame = document.getElementById(`frame-${user}`);
            if (!frame) return;

            // Deactivate all screens in this frame
            frame.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            frame.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
            
            // Handle template redirection for clarity
            let originalScreenId = screenId;
            if (screenId.includes('active-bet')) {
                 screenId = 'screen-5-active-bet'; // Use the shared template ID
            } else if (screenId.includes('match-results')) {
                screenId = 'screen-12-h2h-match-results'; // New Match Results screen
            } 
            
            // Activate the specified screen
            const targetScreen = frame.querySelector(`#${screenId}`);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }

            // Custom Renders
            if (originalScreenId.includes('resolution')) {
                renderResolutionPoll(frame.id); 
            }
            
            // --- STEP 12: MATCH SUMMARY CUSTOMIZATION ---
            if (originalScreenId === 'screen-12-h2h-match-results') {
                const isWinner = user === 'a'; // Sarah K (User A) is the winner in this scenario
                
                const winBanner = frame.querySelector('.match-results-summary h1');
                const h2hScoreA = frame.querySelector('.h2h-score-a');
                const h2hScoreB = frame.querySelector('.h2h-score-b');
                
                // WINNER (Sarah K.)
                if (isWinner) {
                    winBanner.innerHTML = 'CONGRATS!<br>YOU WON.'; // Applied line break
                    winBanner.className = 'win-banner';
                    h2hScoreA.textContent = '1';
                    h2hScoreB.textContent = '0';
                    frame.querySelector('.winner-panel h3').textContent = 'Sarah K. Wins!';
                    frame.querySelector('.winner-panel p').textContent = 'You defeated 1 opponent.';
                    frame.querySelector('.loser-info span').textContent = 'Jessica M.';
                // LOSER (Jessica M.)
                } else {
                    winBanner.innerHTML = 'NICE TRY, BUT<br>YOU LOST.'; // Applied line break
                    winBanner.className = 'loss-banner';
                    h2hScoreA.textContent = '0';
                    h2hScoreB.textContent = '1';
                    frame.querySelector('.winner-panel h3').textContent = 'Sarah K. Wins!';
                    frame.querySelector('.winner-panel p').textContent = 'You were the defeated opponent.';
                    frame.querySelector('.loser-info span').textContent = 'You';
                }
            }


            // --- STEP 6-9+: PENDING/LIVE BET LOGIC ---
            
            const statusEl = frame.querySelector('#bet-status-text');
            const initialPredictionLine = frame.querySelector('#initial-prediction-line'); // The new element
            // Structured player lists
            const livePlayersContainer = frame.querySelector('#live-players-container'); 
            const pendingPlayersContainer = frame.querySelector('#pending-players-container'); 
            const timerContainer = frame.querySelector(`#countdown-timer-${user}`);

            // Reset visibility
            if (livePlayersContainer) livePlayersContainer.style.display = 'none';
            if (pendingPlayersContainer) pendingPlayersContainer.style.display = 'none';
            if (initialPredictionLine) initialPredictionLine.style.display = 'none'; // Default hidden

            // Conditional countdown visibility
            if (currentStepIndex >= 8 && originalScreenId === 'screen-5-active-bet-live') { 
                 if (timerContainer) timerContainer.style.display = 'flex';
                 startCountdown(); 
            } else {
                 if (timerContainer) timerContainer.style.display = 'none';
                 if (currentStepIndex < 8 && countdownInterval) stopCountdown(); 
            }

            
            if (currentStepIndex >= 5 && currentStepIndex <= 7) { // PENDING state (Steps 6-8)
                if (statusEl) statusEl.textContent = 'Your Bet Has Been Sent';
                if (pendingPlayersContainer) pendingPlayersContainer.style.display = 'block';
                if (initialPredictionLine && user === 'a') { // Only show Sarah's prediction on her screen
                    initialPredictionLine.style.display = 'flex';
                }
                
            } else if (currentStepIndex >= 8) { // LIVE state (Step 9 onwards)
                if (statusEl) statusEl.textContent = 'Bet is LIVE! Locked & Running';
                
                // Show the Live Player list
                if (livePlayersContainer) {
                    livePlayersContainer.style.display = 'block'; 
                }
            }
        }


        function updateJourneyUI() {
            const step = linearJourney[currentStepIndex];
            
            // 1. Update Journey Controls
            document.getElementById('current-step-label').innerHTML = `Step ${currentStepIndex + 1}/${linearJourney.length}`;
            document.getElementById('journey-description').innerHTML = step[2];
            
            // Update button states
            document.getElementById('prev-step-btn').disabled = currentStepIndex === 0;
            document.getElementById('next-step-btn').disabled = currentStepIndex === linearJourney.length - 1;

            // 2. Update Dual Frames
            goToScreenForUser('a', step[0]); // User A (Sarah K.)
            goToScreenForUser('b', step[1]); // User B (Jessica M.)
        }

        /**
         * The simplified navigation logic. Moves strictly linearly.
         */
        function navigateJourney(direction) {
            if (direction === 'next' && currentStepIndex < linearJourney.length - 1) {
                currentStepIndex++;
            } else if (direction === 'prev' && currentStepIndex > 0) {
                currentStepIndex--;
            }
            
            updateJourneyUI();
        }

        // --- ARROW KEY NAVIGATION LOGIC ---
        document.addEventListener('keydown', (event) => {
            // Check if the target is an input or textarea to allow normal typing
            if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                return;
            }

            if (event.key === 'ArrowRight') {
                navigateJourney('next');
                event.preventDefault(); 
            } else if (event.key === 'ArrowLeft') {
                navigateJourney('prev');
                event.preventDefault(); 
            }
        });

        // --- COPYRIGHT YEAR LOGIC ---
        function updateCopyrightYear() {
            const currentYear = new Date().getFullYear();
            const yearSpan = document.getElementById('current-year');
            if (yearSpan) {
                yearSpan.textContent = currentYear;
            }
        }


        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            updateCopyrightYear(); // Set the current year
            updateJourneyUI();
        });
    </script>
</head>
<body>
    
    <div class="too-small-message">
        <p>‚ö†Ô∏è Screen Too Small</p>
        <p>This dual-frame prototype requires a minimum screen width of 1050 pixels to be viewed correctly. Please resize your browser window or switch to a desktop/tablet device.</p>
    </div>

    <div class="content-wrapper">
        <div class="dual-frame-container">
            
            <div id="frame-a" class="mobile-frame frame-red">
                <span class="user-label">User A (Sarah K.)</span>

                <div id="screen-0-lock-plain" class="screen">
                    <main class="content">
                        <h1>2:44</h1>
                        <p>Tuesday, Dec 16</p>
                    </main>
                </div>

                <div id="screen-0-lock-notified" class="screen">
                    <main class="content">
                        <h1>2:44</h1>
                        <p>Tuesday, Dec 16</p>
                        <div id="lock-screen-notification" class="notification-mock-content">
                            <span style="font-weight: bold; color: #dc3545;">Betsie: New Challenge!</span>
                            <p style="font-size: 14px; margin: 5px 0 0 0;">Sarah K. has challenged you: "Olivia and James will..." (Tap to view)</p>
                        </div>
                    </main>
                </div>

                <div id="screen-1-signup" class="screen">
                    <header class="header" style="justify-content: center; border-bottom: none;"><span class="progress-indicator" style="font-size: 20px;">Betsie</span></header>
                    <main class="content" style="text-align: center; justify-content: center; padding-top: 80px; padding-bottom: 20px;">
                        <h1 style="font-size: 24px; margin-top: 0;">Start Your First Bet</h1>
                        <p style="color: #555; margin-bottom: 40px;">Predict, challenge, and track your bragging rights.</p>
                        <button class="cta-primary" style="background-color: #4285f4;">Continue with Google</button>
                        <button class="cta-primary" style="background-color: #000; margin-top: 15px;">Continue with Apple</button>
                        <button class="cta-primary cta-secondary" style="margin-top: 15px;">Continue with Email</button>
                    </main>
                    <div class="nav-footer" style="display: none;"></div>
                </div>

                <div id="screen-2-home-feed" class="screen">
                    <header class="header"><span class="back-button">Profile</span><span class="progress-indicator">Feed</span><span class="close-button">Inbox</span></header>
                    <main class="content">
                        <div style="text-align: center; padding: 10px 0; border-bottom: 1px solid #eee; margin-bottom: 20px;">
                            <p style="color: #555; font-weight: 600;">üëã Welcome, Sarah K.!</p>
                            <p class="small-text" style="margin-bottom: 10px;">No active bets yet. Make your first prediction!</p>
                            <button class="cta-primary" style="padding: 10px; font-size: 14px; background-color: #28a745;">CREATE BET</button>
                        </div>
                        <h2 style="text-align: center; color: #333; margin-bottom: 20px;">üî• TRENDING</h2>
                        <div class="bet-card">
                            <p>Posted by @SwiftieFan99</p> 
                            <h3>Taylor Swift will release a re-recorded Debut album by the end of Q1 next year.</h3>
                            <div class="trending-picks-container">
                                <span>42 people picked: YES</span>
                                <span style="font-weight: 300; color: #aaa;">|</span>
                                <span>18 people picked: NO</span>
                            </div>
                        </div>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item active"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-5-define" class="screen">
                    <header class="header"><span class="back-button">&lt; Back</span><span class="progress-indicator">1/3 Define</span><span class="close-button">X</span></header>
                    <main class="content">
                        <h1>WHAT'S THE BET?</h1>
                        <textarea id="betQuestion" class="input-field large-text" placeholder="I bet that... (e.g. Olivia and James will confirm they are dating before the next award show.">Olivia and James will confirm they are dating before the next awards show.</textarea>
                        
                        <h2 style="margin-top: 30px;">RESOLUTION DATE</h2>
                        <div class="input-mock-date">
                            Dec 20, 2025 at Midnight <span style="float: right;">üìÖ</span>
                        </div>
                    </main>
                    <div class="screen-footer">
                        <button class="cta-primary">NEXT: PICK FRIENDS</button>
                        <button class="cta-primary cta-secondary" style="background-color: #ccc; color: #333; border: none; margin-top: 10px;">SAVE DRAFT</button>
                    </div>
                </div>

                <div id="screen-8-invite" class="screen">
                    <header class="header"><span class="back-button">&lt; Back</span><span class="progress-indicator">2/3 Invite</span><span class="close-button">X</span></header>
                    <main class="content">
                        <h1>WHO ARE YOU CHALLENGING?</h1>
                        <input type="text" class="input-field friend-search-input" placeholder="Search name, username, or email...">
                        
                        <h2 style="font-size: 16px; margin-top: 20px;">BETSIE FRIENDS (1 Selected)</h2>
                        <div class="friend-list-item">
                            <div style="display: flex; align-items: center;">
                                <div class="avatar-placeholder avatar-jessica"></div>
                                <span>Jessica M. (Selected)</span>
                            </div>
                            <button class="select-btn" style="padding: 5px 10px; border-radius: 5px; font-size: 12px; background-color: #28a745; color: white; border: none;">REMOVE</button>
                        </div>
                        <div class="friend-list-item">
                            <div style="display: flex; align-items: center;">
                                <div class="avatar-placeholder avatar-emily"></div>
                                <span>Emily R.</span>
                            </div>
                            <button class="select-btn" style="padding: 5px 10px; border-radius: 5px; font-size: 12px; background-color: #ccc; color: #333; border: none;">SELECT</button>
                        </div>

                        <h2 style="font-size: 16px; margin-top: 30px;">INVITE FROM ADDRESS BOOK</h2>
                        <div class="friend-list-item">
                            <div style="display: flex; align-items: center;">
                                <div class="avatar-placeholder avatar-michael"></div>
                                <span>Michael B.</span>
                            </div>
                            <button class="invite-btn" style="padding: 5px 10px; border-radius: 5px; font-size: 12px; background-color: #007aff; color: white; border: none;">INVITE</button>
                        </div>
                        
                    </main>
                    <div class="screen-footer"><button class="cta-primary">REVIEW BET (3/3)</button></div>
                </div>

                <div id="screen-8a-review" class="screen">
                    <header class="header"><span class="back-button">&lt; Back</span><span class="progress-indicator">3/3 Review</span><span class="close-button">X</span></header>
                    <main class="content">
                        <h1 style="font-size: 22px; text-align: center;">Confirm and Send Challenge</h1>
                        <div class="bet-card" style="padding: 20px; border-color: #007aff;">
                            <p style="font-weight: 600; color: #555;">PREDICTION:</p>
                            <h3 id="review-question" style="font-size: 18px; margin-top: 5px;">Olivia and James will confirm they are dating before the next awards show.</h3>
                            <p id="review-resolution">Dec 20, 2025 at Midnight</p>
                        </div>
                        <div class="bet-card">
                            <p style="font-weight: 600; color: #555;">INVITED PLAYERS:</p>
                            <p id="review-players" style="font-size: 16px; margin-top: 5px;">You (Sarah K.) vs. Jessica M. + 1 other</p>
                        </div>
                    </main>
                    <div class="screen-footer"><button class="cta-primary">SEND BET AND INVITE PLAYERS</button></div>
                </div>

                <div id="screen-5-active-bet" class="screen">
                    <header class="header"><span class="back-button">Feed</span><span class="progress-indicator">My Bets</span><span class="close-button">Inbox</span></header>
                    <main class="content" style="text-align: center;">
                        <h1 style="font-size: 24px; margin-top: 30px;">Active Bets (1)</h1>
                        <div class="bet-card" style="background-color: #f9f9f9;">
                            <p id="bet-status-text" style="color: #dc3545; font-weight: bold;">[Status Text]</p>
                            
                            <div id="initial-prediction-line" class="player-bet-line" style="display: none;">
                                <div class="avatar-placeholder avatar-sarah" style="margin-right: 0;"></div>
                                <div class="chat-bubble sarah-bet" style="background-color: #fff; color: #333; font-weight: 500; border: 1px solid #ddd; border-bottom-left-radius: 18px;">
                                    Sarah K.: Olivia and James will confirm they are dating before the next awards show.
                                </div>
                            </div>
                            
                            <div id="countdown-timer-a" class="countdown-timer-container" style="display: none;">
                                </div>
                            
                            <div id="live-players-container" class="pending-players-container" style="display: none;">
                                <h4 style="font-size: 16px; color: #28a745; font-weight: 700; margin-bottom: 10px; text-align: center; margin-top: 15px;">Current Predictions:</h4>
                                
                                <div class="player-bet-line">
                                    <div class="avatar-placeholder avatar-sarah" style="margin-right: 0;"></div>
                                    <div class="chat-bubble sarah-bet">
                                        You: Olivia and James will confirm they are dating before the next awards show.
                                    </div>
                                </div>
                                
                                <div class="player-bet-line">
                                    <div class="avatar-placeholder avatar-jessica" style="margin-right: 0;"></div>
                                    <div class="chat-bubble jessica-bet">
                                        Jessica M.: Olivia will announce she's actually with Trevor.
                                    </div>
                                </div>

                                <div class="player-bet-line">
                                    <div class="avatar-placeholder avatar-emily" style="margin-right: 0;"></div>
                                    <div class="chat-bubble pending-bet">
                                        Emily R. (Pending)
                                    </div>
                                </div>

                            </div>

                            <div id="pending-players-container" class="pending-players-container" style="display: block;">
                                <h4 style="font-size: 16px; color: #f7a01d; font-weight: 700; margin-bottom: 15px; text-align: center;">Awaiting Responses:</h4>
                                
                                <div class="player-bet-line">
                                    <span class="pending-indicator"></span>
                                    <div class="player-info">
                                        <div class="avatar-placeholder avatar-jessica" style="margin-right: 8px;"></div>
                                        Jessica M. (Pending)
                                    </div>
                                </div>
                                <div class="player-bet-line">
                                    <span class="pending-indicator"></span>
                                    <div class="player-info">
                                        <div class="avatar-placeholder avatar-emily" style="margin-right: 8px;"></div>
                                        Emily R. (Pending)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item active"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>
                
                <div id="screen-4-notifications" class="screen">
                    <header class="header"><span class="back-button"></span><span class="progress-indicator">Inbox</span><span class="close-button"></span></header>
                    <main class="content">
                        <h2 style="color: #333; margin-bottom: 10px;">Messages</h2>
                        
                        <div class="inbox-item" style="border-top: 3px solid #f7a01d;">
                            <div class="inbox-item-img">B</div>
                            <div class="inbox-item-text">
                                <span class="inbox-item-title unread">Bet resolution time reached! Settle the score.</span>
                                <span class="inbox-item-meta">Just now - Action Required</span>
                            </div>
                        </div>

                        <div class="inbox-item">
                            <div class="avatar-placeholder avatar-jessica" style="margin-right: 15px;"></div>
                            <div class="inbox-item-text">
                                <span class="inbox-item-title">Jessica M. sent a new message.</span>
                            <span class="inbox-item-meta">Dec 16, 2025 - Chat</span>
                            </div>
                        </div>
                        
                        <div class="inbox-item">
                            <div class="inbox-item-img">B</div>
                            <div class="inbox-item-text">
                                <span class="inbox-item-title">Jessica M. accepted your challenge.</span>
                                <span class="inbox-item-meta">Dec 14, 2025 - System</span>
                            </div>
                        </div>

                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item active"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-7-resolution" class="screen">
                    <header class="header"><span class="back-button">&lt; Back</span><span class="progress-indicator">Settle the Score</span><span class="close-button">X</span></header>
                    <main class="content" style="padding-bottom: 20px;">
                        <h1 style="font-size: 24px; text-align: center;">SETTLE THE SCORE</h1> 
                        
                        <div class="resolution-info-box">
                            Betting window has been closed.
                            <span class="resolution-date">Resolution Date: Dec 20, 2025 at Midnight</span>
                        </div>
                        
                        <div class="resolution-poll-container">
                            </div>
                        
                    </main>
                    <div class="screen-footer">
                        <button class="cta-primary">CONFIRM WINNER</button>
                    </div>
                </div>
                
                <div id="screen-12-h2h-match-results" class="screen">
                    <header class="header"><span class="back-button"></span><span class="progress-indicator">Match Results</span><span class="close-button"></span></header>
                    <main class="content">
                        <div class="match-results-summary">
                            <h1 class="win-banner">CONGRATS!<br>YOU WON.</h1> 
                            <p style="color: #555; font-weight: 600;">The Bet was settled on Dec 20, 2025.</p>
                        </div>

                        <div class="winning-prediction-box">
                            <h4>Winning Prediction:</h4>
                            <p>Olivia and James will confirm they are dating before the next awards show.</p>
                        </div>

                        <div class="winner-panel">
                            <div class="winner-avatar avatar-sarah"></div>
                            <h3>Sarah K. Wins!</h3>
                            <p>You defeated 1 opponent.</p>
                        </div>
                        
                        <h4 style="text-align: center; color: #dc3545; margin: 15px 0 5px 0;">Defeated Opponent:</h4>
                        <div class="loser-container">
                            <div class="loser-info">
                                <div class="loser-avatar avatar-jessica"></div>
                                <span>Jessica M.</span>
                            </div>
                            </div>

                        <div class="h2h-scorecard">
                            <h4>HEAD-TO-HEAD RECORD vs. Jessica M.</h4>
                            <div class="h2h-score-display">
                                <span class="h2h-score-a">1</span>
                                <span>-</span>
                                <span class="h2h-score-b">0</span>
                            </div>
                        </div>
                        <button id="social-share-btn-a" class="cta-primary" style="background-color: #17a2b8; margin-top: 0; padding: 10px; font-size: 14px; text-transform: none;">Share Your Victory on Social Media</button>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item active"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-11-profile-score" class="screen">
                    <header class="header"><span class="back-button">Feed</span><span class="progress-indicator">Profile</span><span class="close-button"></span></header>
                    <main class="content">
                        <div class="profile-picture avatar-sarah"></div>
                        <h1 style="text-align: center; margin-top: 0;">Sarah K.</h1>
                        <p style="text-align: center; color: #888;">Joined: Dec 2025</p>
                        <div class="score-card">
                            <h3>ALL-TIME RECORD</h3>
                            <div class="score-row">
                                <span>WINS (W)</span>
                                <span class="win">1</span>
                            </div>
                            <div class="score-row">
                                <span>LOSSES (L)</span>
                                <span class="loss">0</span>
                            </div>
                            <div class="score-row" style="border-top: 1px dashed #ccc; margin-top: 10px; padding-top: 10px;">
                                <span>WIN RATE</span>
                                <span style="font-weight: 700;">100%</span>
                            </div>
                        </div>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item active"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>


            </div>

            
            <div id="frame-b" class="mobile-frame frame-blue">
                <span class="user-label">User B (Jessica M.)</span>

                <div id="screen-0-lock-plain" class="screen">
                    <main class="content">
                        <h1>2:44</h1>
                        <p>Tuesday, Dec 16</p>
                    </main>
                </div>

                <div id="screen-0-lock-notified" class="screen">
                    <main class="content">
                        <h1>2:44</h1>
                        <p>Tuesday, Dec 16</p>
                        <div class="notification-mock-content">
                            <span style="font-weight: bold; color: #dc3545;">Betsie: New Challenge!</span>
                            <p style="font-size: 14px; margin: 5px 0 0 0;">Sarah K. has challenged you: "Olivia and James will..." (Tap to view)</p>
                        </div>
                    </main>
                </div>

                <div id="screen-1-signup" class="screen">
                    <header class="header" style="justify-content: center; border-bottom: none;"><span class="progress-indicator" style="font-size: 20px;">Betsie</span></header>
                    <main class="content" style="text-align: center; justify-content: center; padding-top: 80px; padding-bottom: 20px;">
                        <h1 style="font-size: 24px; margin-top: 0;">Start Your First Bet</h1>
                        <p style="color: #555; margin-bottom: 40px;">Predict, challenge, and track your bragging rights.</p>
                        <button class="cta-primary" style="background-color: #4285f4;">Continue with Google</button>
                        <button class="cta-primary" style="background-color: #000; margin-top: 15px;">Continue with Apple</button>
                        <button class="cta-primary cta-secondary" style="margin-top: 15px;">Continue with Email</button>
                    </main>
                    <div class="nav-footer" style="display: none;"></div>
                </div>

                <div id="screen-2-home-feed" class="screen">
                    <header class="header"><span class="back-button">Profile</span><span class="progress-indicator">Feed</span><span class="close-button">Inbox</span></header>
                    <main class="content">
                        <div style="text-align: center; padding: 10px 0; border-bottom: 1px solid #eee; margin-bottom: 20px;">
                            <p style="color: #555; font-weight: 600;">üëã Welcome, Jessica M.!</p>
                            <p class="small-text" style="margin-bottom: 10px;">No active bets yet. Make your first prediction!</p>
                            <button class="cta-primary" style="padding: 10px; font-size: 14px; background-color: #28a745;">CREATE BET</button>
                        </div>
                        <h2 style="text-align: center; color: #333; margin-bottom: 20px;">üî• TRENDING</h2>
                        <div class="bet-card">
                            <p>Posted by @SwiftieFan99</p>
                            <h3>Taylor Swift will release a re-recorded Debut album by the end of Q1 next year.</h3>
                            <div class="trending-picks-container">
                                <span>42 people picked: YES</span>
                                <span style="font-weight: 600; color: #555;">|</span>
                                <span>18 people picked: NO</span>
                            </div>
                        </div>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item active"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-9-challenge-response" class="screen active">
                    <header class="header"><span class="progress-indicator" style="font-size: 20px;">Betsie</span><span></span></header>
                    <main class="content" style="text-align: center; padding-bottom: 20px;">
                        <div class="challenger-picture avatar-sarah"></div>
                        
                        <h1 style="margin-top: 0; font-size: 22px;">You've been challenged!</h1>
                        
                        <div class="bet-card" style="padding: 20px; border-color: #007aff;">
                            <p style="font-weight: 700; color: #555;">Sarah K. Predicts:</p>
                            <h3 style="font-size: 18px; margin-top: 0; margin-bottom: 0;">Olivia and James will confirm they are dating before the next awards show.</h3>
                        </div>

                        <h2 style="color: #333; margin-top: 30px; margin-bottom: 20px;">YOUR RESPONSE</h2>
                        
                        <button class="cta-primary" style="background-color: #28a745; margin-bottom: 15px;">AGREE WITH SARAH K.</button>
                        
                        <p style="color: #888; margin-bottom: 10px; font-weight: 600;">OR, PROPOSE YOUR OWN OUTCOME:</p>
                        
                        <textarea class="input-field large-text" style="height: 60px; margin-bottom: 10px;">Olivia will announce she's actually with Trevor.</textarea>
                        
                        <button class="cta-primary" style="background-color: #007aff;">SUBMIT YOUR PREDICTION</button>

                    </main>
                </div>

                <div id="screen-5-active-bet" class="screen">
                    <header class="header"><span class="back-button">Feed</span><span class="progress-indicator">My Bets</span><span class="close-button">Inbox</span></header>
                    <main class="content" style="text-align: center;">
                        <h1 style="font-size: 24px; margin-top: 30px;">Active Bets (1)</h1>
                        <div class="bet-card" style="background-color: #f9f9f9;">
                            <p id="bet-status-text" style="color: #dc3545; font-weight: bold;">[Status Text]</p>

                            <div id="initial-prediction-line" class="player-bet-line" style="display: none;">
                                <div class="avatar-placeholder avatar-sarah" style="margin-right: 0;"></div>
                                <div class="chat-bubble sarah-bet">
                                    Sarah K.: Olivia and James will confirm they are dating before the next awards show.
                                </div>
                            </div>

                             <div id="countdown-timer-b" class="countdown-timer-container" style="display: none;">
                                </div>
                            
                            <div id="live-players-container" class="pending-players-container" style="display: none;">
                                <h4 style="font-size: 16px; color: #28a745; font-weight: 700; margin-bottom: 10px; text-align: center; margin-top: 15px;">Current Predictions:</h4>
                                
                                <div class="player-bet-line">
                                    <div class="avatar-placeholder avatar-sarah" style="margin-right: 0;"></div>
                                    <div class="chat-bubble sarah-bet">
                                        Sarah K.: Olivia and James will confirm they are dating before the next awards show.
                                    </div>
                                </div>
                                
                                <div class="player-bet-line">
                                    <div class="avatar-placeholder avatar-jessica" style="margin-right: 0;"></div>
                                    <div class="chat-bubble jessica-bet">
                                        You: Olivia will announce she's actually with Trevor.
                                    </div>
                                </div>

                                <div class="player-bet-line">
                                    <div class="avatar-placeholder avatar-emily" style="margin-right: 0;"></div>
                                    <div class="chat-bubble pending-bet">
                                        Emily R. (Pending)
                                    </div>
                                </div>

                            </div>
                            
                            <div id="pending-players-container" class="pending-players-container" style="display: none;">
                                <h4 style="font-size: 16px; color: #f7a01d; font-weight: 700; margin-bottom: 15px; text-align: center;">Awaiting Responses:</h4>
                                
                                <div class="player-bet-line">
                                    <span class="pending-indicator"></span>
                                    <div class="player-info">
                                        <div class="avatar-placeholder avatar-jessica" style="margin-right: 8px;"></div>
                                        You (Pending)
                                    </div>
                                </div>
                                <div class="player-bet-line">
                                    <span class="pending-indicator"></span>
                                    <div class="player-info">
                                        <div class="avatar-placeholder avatar-emily" style="margin-right: 8px;"></div>
                                        Emily R. (Pending)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item active"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>
                
                <div id="screen-4-notifications" class="screen">
                    <header class="header"><span class="back-button"></span><span class="progress-indicator">Inbox</span><span class="close-button"></span></header>
                    <main class="content">
                        <h2 style="color: #333; margin-bottom: 10px;">Messages</h2>
                        
                        <div class="inbox-item" style="border-top: 3px solid #f7a01d;">
                            <div class="inbox-item-img">B</div>
                            <div class="inbox-item-text">
                                <span class="inbox-item-title unread">Bet resolution time reached! Settle the score.</span>
                                <span class="inbox-item-meta">Just now - Action Required</span>
                            </div>
                        </div>

                        <div class="inbox-item">
                            <div class="avatar-placeholder avatar-sarah" style="margin-right: 15px;"></div>
                            <div class="inbox-item-text">
                                <span class="inbox-item-title">Sarah K. sent a new message.</span>
                                <span class="inbox-item-meta">Dec 16, 2025 - Chat</span>
                            </div>
                        </div>
                        
                        <div class="inbox-item">
                            <div class="inbox-item-img">B</div>
                            <div class="inbox-item-text">
                                <span class="inbox-item-title">You accepted the challenge from Sarah K.</span>
                                <span class="inbox-item-meta">Dec 14, 2025 - System</span>
                            </div>
                        </div>

                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item active"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-7-resolution" class="screen">
                    <header class="header"><span class="back-button">&lt; Back</span><span class="progress-indicator">Settle the Score</span><span class="close-button">X</span></header>
                    <main class="content" style="padding-bottom: 20px;">
                        <h1 style="font-size: 24px; text-align: center;">SETTLE THE SCORE</h1> 
                        
                        <div class="resolution-info-box">
                            Betting window has been closed.
                            <span class="resolution-date">Resolution Date: Dec 20, 2025 at Midnight</span>
                        </div>
                        
                        <div class="resolution-poll-container">
                            </div>
                        
                    </main>
                    <div class="screen-footer">
                        <button class="cta-primary">CONFIRM WINNER</button>
                    </div>
                </div>

                <div id="screen-12-h2h-match-results" class="screen">
                    <header class="header"><span class="back-button"></span><span class="progress-indicator">Match Results</span><span class="close-button"></span></header>
                    <main class="content">
                        <div class="match-results-summary">
                            <h1 class="loss-banner">NICE TRY, BUT<br>YOU LOST.</h1> 
                            <p style="color: #555; font-weight: 600;">The Bet was settled on Dec 20, 2025.</p>
                        </div>

                        <div class="winning-prediction-box">
                            <h4>Winning Prediction:</h4>
                            <p>Olivia and James will confirm they are dating before the next awards show.</p>
                        </div>

                        <div class="winner-panel">
                            <div class="winner-avatar avatar-sarah"></div>
                            <h3>Sarah K. Wins!</h3>
                            <p>You were the defeated opponent.</p>
                        </div>
                        
                        <h4 style="text-align: center; color: #dc3545; margin: 15px 0 5px 0;">Defeated Opponent:</h4>
                        <div class="loser-container">
                            <div class="loser-info">
                                <div class="loser-avatar avatar-jessica"></div>
                                <span>You</span>
                            </div>
                        </div>

                        <div class="h2h-scorecard">
                            <h4>HEAD-TO-HEAD RECORD vs. Sarah K.</h4>
                            <div class="h2h-score-display">
                                <span class="h2h-score-a">0</span>
                                <span>-</span>
                                <span class="h2h-score-b">1</span>
                            </div>
                        </div>
                        <button id="social-share-btn-b" class="cta-primary" style="background-color: #17a2b8; margin-top: 0; padding: 10px; font-size: 14px; text-transform: none;">Share Outcome on Social Media</button>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item active"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-11-profile-score" class="screen">
                    <header class="header"><span class="back-button">Feed</span><span class="progress-indicator">Profile</span><span class="close-button"></span></header>
                    <main class="content">
                        <div class="profile-picture avatar-jessica"></div>
                        <h1 style="text-align: center; margin-top: 0;">Jessica M.</h1>
                        <p style="text-align: center; color: #888;">Joined: Dec 2025</p>
                        <div class="score-card">
                            <h3>ALL-TIME RECORD</h3>
                            <div class="score-row">
                                <span>WINS (W)</span>
                                <span class="win">0</span>
                            </div>
                            <div class="score-row">
                                <span>LOSSES (L)</span>
                                <span class="loss">1</span>
                            </div>
                            <div class="score-row" style="border-top: 1px dashed #ccc; margin-top: 10px; padding-top: 10px;">
                                <span>WIN RATE</span>
                                <span style="font-weight: 700;">0%</span>
                            </div>
                        </div>
                    </main>
                    <div class="nav-footer">
                        <div class="nav-item"><span class="nav-icon">üè†</span><span>Feed</span></div>
                        <div class="nav-item"><span class="nav-icon">üìà</span><span>My Bets</span></div>
                        <div class="nav-create">+</div>
                        <div class="nav-item active"><span class="nav-icon">üîî</span><span>Inbox</span></div>
                        <div class="nav-item"><span class="nav-icon">üë§</span><span>Profile</span></div>
                    </div>
                </div>

                <div id="screen-5-define" class="screen"></div>
                <div id="screen-8-invite" class="screen"></div>
                <div id="screen-8a-review" class="screen"></div>
                <div id="signup-modal-friend" class="modal"></div>
            </div>

        </div>
        
        <div class="journey-container">
            <div class="journey-controls">
                <button id="prev-step-btn" onclick="navigateJourney('prev')">
                    &lt; Previous Step
                </button>
                <span id="current-step-label">Step 1/13</span>
                <button id="next-step-btn" onclick="navigateJourney('next')">
                    Next Step &gt;
                </button>
            </div>
            <div id="journey-description">
                Step 1: New User Onboarding (Sarah K. - Red Frame). The primary user is logging in.
            </div>
            <div class="copyright">
                ¬© <span id="current-year">2025</span> <a href="https://squeakycheeseinc.com" target="_blank">Squeaky Cheese, Inc.</a>
            </div>
        </div>
    </div>
</body>
</html>